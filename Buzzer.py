import RPi.GPIO as GPIO
import time
from threading import Timer
import constants



part1= [[76, 12], [A76, 12], [A20, 12], [A76, 12], [A20, 12], [A72, 12], [A76, 12], [A20, 12], [A79, 12], [A20, 36], [A67, 12], [A20, 36] ]

part2 = [[72, 12], [A20, 24], [A67, 12], [A20, 24], [A64, 12], [A20, 24], [A69, 12], [A20, 12], [A71, 12], [A20, 12], [A70, 12], [A69, 12], [A20, 12], [A67, 16], [A76, 16], [A79, 16], [A81, 12], [A20, 12], [A77, 12], [A79, 12], [A20, 12], [A76, 12], [A20, 12], [A72, 12], [A74, 12], [A71, 12], [A20, 24]]

part3 = [ [48, 12], [A20, 12], [A79, 12], [A78, 12], [A77, 12], [A75, 12], [A60, 12], [A76, 12], [A53, 12], [A68, 12], [A69, 12], [A72, 12], [A60, 12], [A69, 12], [A72, 12], [A74, 12], [A48, 12], [A20, 12], [A79, 12], [A78, 12], [A77, 12], [A75, 12], [A55, 12], [A76, 12], [A20, 12], [A84, 12], [A20, 12], [A84, 12], [A84, 12] ]

#part4 = [55, 12, 20, 12, 48, 12, 20, 12, 79, 12, 78, 12, 77, 12, 75, 12, 60, 12, 76, 12, 53, 12, 68, 12, 69, 12, 72, 12, 60, 12, 69, 12, 72, 12, 74, 12, 48, 12, 20, 12, 75, 24, 20, 12, 74, 24, 20, 12, 72, 24, 20, 12, 55, 12, 55, 12, 20, 12, 48, 12 ]

part5 = [ [72, 12], [A72, 12], [A20, 12], [A72, 12], [A20, 12], [A72, 12], [A74, 12], [A20, 12], [A76, 12], [A72, 12], [A20, 12], [A69, 12], [A67, 12], [A20, 12], [A43, 12], [A20, 12], [A72, 12], [A72, 12],[A20, 12], [A72, 12], [A20, 12], [A72, 12], [A74, 12], [A76, 12], [A55, 12], [A20, 24], [A48, 12], [A20, 24], [A43, 12], [A20, 12], [A72, 12], [A72, 12], [A20, 12], [A72, 12],[ A20, 12], [A72, 12], [A74, 12], [A20, 12], [A76, 12], [A72, 12], [A20, 12], [A69, 12], [A67, 12], [A20, 12], [A43, 12], [A20, 12], [A76, 12], [A76, 12], [A20, 12], [A76, 12], [A20, 12], [A72, 12], [A76, 12], [A20, 12], [A79, 12], [A20, 36], [A67, 12], [A20, 36] ]

part6 = [ [76, 12], [A72, 12], [A20, 12], [A67, 12], [A55, 12], [A20, 12], [A68, 12], [A20, 12], [A69, 12], [A77, 12],[A53, 12], [A77, 12], [A69, 12], [A60, 12], [A53, 12], [A20, 12], [A71, 16], [A81, 16], [A81, 16], [A81, 16], [A79, 16], [A77, 16], [A76, 12], [A72, 12], [A55, 12], [A69, 12], [A67, 12], [A60, 12], [A55, 12], [A20, 12], [A76, 12], [A72, 12], [A20, 12], [A67, 12], [A55, 12], [A20, 12], [A68, 12], [A20, 12], [A69, 12], [A77, 12], [A53, 12], [A77, 12], [A69, 12], [A60, 12], [A53, 12], [A20, 12], [A71, 12], [A77, 12], [A20, 12], [A77, 12], [A77, 16], [A76, 16], [A74, 16], [A72, 12], [A64, 12], [A55, 12], [A64, 12], [A60, 12], [A20, 36] ]

part7 = [ [72, 12], [A20, 24], [A67, 12], [A20, 24], [A64, 24], [A69, 16], [A71, 16], [A69, 16], [A68, 24], [A70, 24], [A68, 24], [A67, 12], [A65, 12], [A67, 48] };

X = [part1, part2, part2, part3, part3, part5, part2, part2, part6, part6, part5, part6, part7]
         
GPIO.setwarnings(False)
GPIO.setmode(GPIO.BCM)

GPIO.setup(constants.PINS["Buzzer"], GPIO.OUT)

buzzerPin = GPIO.PWM(constants.PINS["Buzzer"], 500)

def playSequence(sequence):
    print(sequence)
    buzzerPin.stop()
    if len(sequence) > 0:
        note = sequence.pop(0)
        buzzerPin.ChangeFrequency(note[0])
        buzzerPin.start(50)
        t = Timer(note[1], playSequence, args=[sequence])
        t.start()

for i in range(0, len(X)):
    X[i][0] = 27.5*2**(X[i][0] -21)/12)
    X[i][1] = X[i][1]/1000
         
playSequence(X[i][0],  X[i][1])
    
